## 목차

[2.5.0 개요](#250-개요) </br> [2.5.1 P2P 파일 분배](#251-P2P-파일-분배) </br>

## 2.5.0 개요

앞서 살펴본 애플리케이션(웹, 전자메일, DNS 등) 모두는 항상 켜져있는 서버에 의존하는 클라이언트-서버 구조를 채택하고 있다면, 이 절에서는 커다란 파일을 한 서버에서 다수의 호스트(피어)로 분배하는 P2P 응용 애플리케이션을 다룰 것이다. 여기서의 커다란 파일이라 함은 리눅스 운영체제의 새로운 버전, 소프트웨어 패치, MP3 파일이 예가 될 수 있다. P2P 파일 분배에서 각 피어는 수신한 파일의 임의의 부분을 다른 피어들에게 재분배할 수 있어서 서버의 분배 프로세스를 도울 수 있다.

## 2.5.1 P2P 파일 분배

### P2P 구조의 확장성

클라이언트-서버 구조에서 파일을 분배한다고 할 때 모든 피어 호스트에게 파일의 복사가 완료되는 시간인 분배시간은 피어의 수에 따라 선형적으로 증가하는 모양새를 띤다. 반면에 P2P 구조에서는 최소 분배시간이 클라이언트-서버 구조의 분배시간보다 항상 작지는 않지만 자가 확장성을 가진다. 이 확장성은 피어가 비트의 소비자이자 재분배자인 것의 직접적인 결과이다.

### 비트토렌트

비트토렌트는 파일 분배를 위한 인기있는 P2P 프로토콜이다. 비트토렌트 용어로 특정 파일의 분배에 참여하는 모든 피어들의 모임을 토렌트(torrent)라고 부르며 토렌트에 참여하는 피어들은 서로에게 같은 크기의 청크(chunk)를 다운로드한다. 일반적인 청크의 크기는 256킬로바이트이며, 피어가 처음으로 토렌트에 가입하면 시간이 지남에 따라 청크들이 쌓이게된다. 각 토렌트는 트랙커(tracker)라고 부르는 기반구조 노드를 갖고 있다. 한 피어가 토렌트에 가입할 때 트랙커에 자신을 등록하고 주기적으로 자신이 아직 토렌트에 있음을 알린다. 이런 방식으로 트랙커는 토렌트에 참여하는 피어들을 추적한다.

새로운 피어가 토렌트에 가입할 때 트랙커는 피어들의 부분집합의 일부의 IP를 신규 피어에게 보내고 이 리스트에 있는 모든 피어들과 동시에 TCP 연결을 설정한다. 이 이웃피어들은 시간에 따라 연결을 끊고 새로 시도하며 변동한다. 이웃피어들과 일정 주기적으로 청크리스트를 교환하면서 가장 드문 것 먼저 채택하여 청크들을 교환하므로 파일들을 공유한다.
