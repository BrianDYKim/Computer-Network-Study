## 목차

[2.1.1 네트워크 애플리케이션 구조](#211-네트워크-애플리케이션-구조)</br> [2.1.2 프로세스 간 통신](#212-프로세스-간-통신)</br> [2.1.3 애플리케이션이 이용 가능한 트랜스포트 서비스](#213-애플리케이션이-이용-가능한-트랜스포트-서비스)</br> [2.1.4 인터넷 전송 프로토콜이 제공하는 서비스](#214-인터넷-전송-프로토콜이-제공하는-서비스)</br> [2.1.5 애플리케이션 계층 프로토콜](#215-애플리케이션-계층-프로토콜)</br>

## 2.1.1 네트워크 애플리케이션 구조

애플리케이션 구조 application architecture 는 개발자에 의해 설계되며 각 종단 시스템에서 어떻게 조직되어야 하는지를 지시한다. 개발자는 현대에 사용되는 2가지 우수한 구조 (클라-서버 구조 혹은 P2P구조) 로 작성할 수 있다.

### 클라이언트-서버 구조 client-sever architecture

이 구조에서 서버는 항상 켜져있는 호스트이다. 이 구조에서 클라이언트는 서로 직접적으로 통신하지 않는다. 예를 들어 웹 애플리케이션에서는 2개의 브라우저가 직접적으로 통신하지 않는다. 또한 서버는 고정 IP 주소를 갖는다. 서버는 항상 동작하므로 클라이언트는 서버 주소로 패킷을 보내서 항상 서버에 연결할 수 있다. 이 구조를 가진 잘 알려진 애플리케이션으로는 웹, 파일 전송, 원격 로그인, 전자메일이 있다.

### P2P구조

이 구조에서는 항상 켜져 있는 기반구조 서버에 최소로 의존한다.(혹은 전혀 의존하지 않는다.) 대신에 애플리케이션은 피어peer 라는 간헐적으로 연결된 호스트 쌍이 서로 직접 통신하도록 한다. 피어는 서비스 제공자 (service provider) 가 소유하지 않고 사용자들이 제어하는 데스크톱과 랩톱이다. 특정 서버를 통하지 않고 피어가 통신하므로 이 구조를 peer-to-peer, P2P 라고 한다. 이 애플리케이션에는 비트토렌트, 스카이프 등이 포함된다.

이 구조의 가장 중목할 만한 특성 중 하나는 자가 확장성 self-scalability 이다. 한 개의 피어는 파일을 공유받으면서 동시에 다른 피어들에게 파일을 분배할 수 있는 서비스 능력이 있다. 일반적으로 상당한 서버기반구조와 서버 대역폭을 요구하지 않기 때문에 비용이 저렴하지만 보안, 성능, 신뢰성에 대해 도전을 받고 있다.

## 2.1.2 프로세스 간 통신

운용체제 용어에서 실제 통신하는 것 곧 프로그램이 아니라 프로세스라 부른다. 종단 시스템에서 실행되는 프로그램이다. 2개의 다른 종단 시스템에서 프로세스는 컴퓨터 네트워크를 통한 메시지 교환으로 서로 통신한다.

### 클라이언트와 서버 프로세스

두 프로세스간의 통신 세션에서 통신을 초기화(다른 프로세스와 세션을 시작하려고 접속을 초기화)하는 프로세스를 클라이언트라 하고, 세션을 시작하기 위해 접속을 기다리는 프로세스를 서버라고 한다.

### 프로세스와 컴퓨터 네트워크 사이의 인터페이스

하나의 프로세스로부터 다른 프로세스로 보내는 메시지는 네트워크를 통해 움직인다. 프로세스는 소켓 (socket)을 통해 네트워크로 메시지를 보내고 받는다. 프로세스는 집이고 소켓은 출입구로 비유된다. 프로세스가 메시지를 다른 호스트의 프로세스로 보내고 싶을 때 출입구(소켓) 바깥 네트워크로 메시지를 밀어낸다. 이와 같이 **`소켓은 호스트의 애플리케이션계층과 트랜스포트계층간의 인터페이스다.`** 또한 소켓은 네트워크 애플리케이션이 인터넷에 만든 프로그래밍 인터페이스이므로 애플리케이션과 네트워크 사이의 API (Application Programming Interface) 라고도 한다.

애플리케이션 개발자는 소켓의 애플리케이션 계층에 대한 모든 통제권을 갖지만, 소켓의 트랜스포트 계층에 대한 통제권은 거의 갖지 못하고 일부만 갖는다. 일부 갖는 통제는 아래와 같다.

1. 트랜스포트 프로토콜의 선택에 대해
2. 최대 버퍼와 최대 세그먼트 크기와 같은 트랜스포트 계층 매개변수의 설정 (3장 내용 참조)

### 프로세스 주소 배정

수신 프로세스는 호스트의 주소, 목적지 호스트 내의 수신 프로세스(수신 소켓)를 명시하는 식별자 2가지의 정보를 명시할 필요가 있다.

소켓은 `애플리케이션 프로세스` ~ `트랜스포트 프로토콜` 간의 인터페이스이다. 애플리케이션을 개발할 때 사용 가능한 트랜스포트 프로토콜을 선택해야 하며, 애플리케이션의 요구에 가장 적합한 서비스를 제공하는 프로토콜을 선택하기 나름이다. 자신의 프로토콜을 이용하는 애플리케이션들에게 **트랜스포트 계층 프로토콜이 제공할 수 있는 서비스**를 넓은 범위에서 4가지 차원으로 분류할 수 있다. 신뢰적 데이터 전송, 처리율, 시간, 보안이다.

## 2.1.3 애플리케이션이 이용 가능한 트랜스포트 서비스

### 신뢰적 데이터 전송 _Reliable Data Transfer_

패킷은 컴퓨터 네트워크 내에서 손실가능성이 있음을 알아보았다. 라우터의 버퍼에서 큐 오버플로우, 패킷의 비트가 잘못되어 호스트 혹은 라우터에 의해 버려질 수 있다. 손실 허용 애플리케이션 loss-tolerant application 의 경우 즉, 어느 정도의 데이터 손실을 참아낼 수 있는 실시간 오디오/비디오 혹은 저장 오디오/비디오와 같은 멀티미디어 애플리케이션에서는 받아들여질 수 있다. 이들 애플리케이션에서 손실 데이터는 플레이되는 미디어의 품질에 약간의 영향을 미칠 수 있다.

### 처리량 _Throughput_

처리율은 네트워크 경로를 따라 두 프로세스간의 통신 세션에서 송신이 수신으로 비트를 전달할 수 있는 비율을 나타낸다. 다른 세션들이 네트워크 경로를 따라 대역폭을 공유하고 이 세션들이 생겼다 없어졌다 하기 때문에 가용한 처리율은 시간에 따라 변동한다.

어느 명시된 속도에서 보장된 가용 처리율을 제공할 수 있다. 예로 인터넷 전화 애플리케이션이 32Kbps로 음성을 인코드한다면, 이 애플리케이션은 이 속도로 데이터를 네트워크로 내보내야 하고 수신 애플리케이션으로 데이터가 전달되어야 한다. 처리율 요구사항을 갖는 애플리케이션은 대역폭 민감 애플리케이션 bandwidth-sensitive application 이라고 한다. 이와 반면에 탄력적 애플리케이션 elastic application 은 가용한 처리율을 많으면 많은 대로 적으면 적은대로 이용할 수 있다. 전자메일, 웹 전송, 파일 전송등이 있다.

### 시간 _Timing_

트랜스포트 계층 프로토콜은 또한 시간 보장 timing guarantee 을 제공할 수 있다. 이 서비스는 상호작용 실시간 애플리케이션에 필요하다.

### 보안 _Security_

트랜스포트 계층 프로토콜은 애플리케이션에 하나 이상의 보안 서비스를 제공할 수 있다. 송신 프로세스가 전송하는 모든 데이터를 암호화할 수 있다. 또한 비밀성 외에도 다른 보안 서비스를 제공하는데 이는 8장에서 자세히 다루게 될 데이터 무결성과 종단 인증등이 포함된다.

## 2.1.4 인터넷 전송 프로토콜이 제공하는 서비스

지금까지 컴퓨터 네트워크가 일반적으로 제공할 수 있는 트랜스포트 서비스를 고려하였다. 이제 인터넷이 제공하는 애플리케이션 지원 유형을 살펴본다. 인터넷은 애플리케이션에게 2개의 전송 프로토콜 즉 UDP와 TCP을 제공한다. 개발자로서 새로운 인터넷 애플리케이션을 만들 때 첫번째 결정해야 하는 것 중의 하나는 UDP 혹은 TCP 중 어느 것을 사용할지이다. 이는 서로 다른 서비스 모델을 제공한다.

### TCP Transmission Control Protocol

`연결지향형` 서비스와 `신뢰적인 데이터 전송` 서비스를 포함한다.

- 연결지향형애플리케이션 계층 메시지 전송 전에 TCP는 클라이언트와 서버가 서로 전송제어정보를 교환하도록 한다. 이 `hand-shaking` 과정이 패킷이 곧 도달할 것이니 준비하라고 알려주는 역할을 한다. 이 hand-shaking 단계를 지나면 TCP 연결이 두 프로세스의 소켓 사이에 존재한다고 얘기한다. 애플리케이션이 메시지 전송을 마치면 연결을 끊어야 한다.
- 신뢰적인 데이터 전송통신 프로세스는 모든 데이터를 올바른 순서로 전달하기 위해 TCP에 의존한다.

또한 TCP는 혼잡제어 방식 (congestion-control mechanism) 서비스를 포함하는데 네트워크가 혼잡상태에 이르면 프로세스 속도를 낮춘다. 3장에서 더 알아보자.

---

** 보안TCP **

TCP나 UDP는 암호화를 제공하지 않는다. 인터넷 커뮤니티는 TCP를 강화한 SSL (Secure Sockets Layer) 를 개발하였다. SSL로 강화된 TCP는 전통적인 TCP가 하는 모든것을 할 뿐 아니라 암호화, 데이터 무결성 그리고 종단 인증을 포함하는 중요한 프로세스 대 프로세스 보안 서비스를 제공한다. *SSL은 애플리케이션 계층에서 구현된 것*으로서 TCP를 강화한 것이다. SSL은 전통적인 TCP 소켓 API와 유사한 자신의 소켓 API를 갖고 있다. 애플리케이션은 SSL을 사용할 때 `평문 데이터를 SSL소켓에 전달`하고 `SSL은 데이터를 암호화`하고 `TCP소켓으로 전달`하는 방식이다. 8장에서 더 알아보자

---

### UDP 서비스

최소의 서비스 모델을 가진 간단한 전송 프로토콜이다. 비연결형이므로 hand-shaking 단계가 없다. 또한 비 신뢰적인 데이터 전송 서비스를 제공한다.

## 2.1.5 애플리케이션 계층 프로토콜

애플리케이션 계층 프로토콜은 다른 종단 시스템에서 실행되는 애플리케이션의 프로세스가 메시지를 보내는 방법을 정의한다.

- 교환(요청, 응답) 메시지의 타입
- 메시지 타입의 문법 (필드와 필드간의 구별방법)
- 필드에 있는 정보의 의미
- 언제, 어떻게 프로세스가 메시지를 전송하고 메시지에 응답하는지 결정하는 규칙

“네트워크 애플리케이션”과 “애플리케이션 계층 프로토콜”을 구별하는 것은 중요하다. 애플리케이션 계층 프로토콜은 네트워크 애플리케이션의 한 요소일 뿐이다.

- “웹”은 유저의 필요에 따라 서버로부터 컨텐츠를 얻게 해주는 네트워크 애플리케이션이다.
- “웹 애플리케이션”은 문서 포맷 표준(HTML), 웹 브라우저, 웹 서버, 애플리케이션 계층 프로토콜을 포함하는 여러 요소들로 구성된다.

`웹 애플리케이션 계층 프로토콜인 HTTP는 브라우저와 웹 서버 사이의 메시지 포맷과 순서를 정의한다.` 따라서 HTTP는 단지 웹 애플리케이션의 한 요소다.

다른 예로 인터넷 전자메일 애플리케이션은 메일서버, 메일 클라이언트, 전자메일 메시지의 구조를 정의하는 표준, 메시지 헤더의 내용을 어떻게 파싱할지 정의하는 애플리케이션 계층 프로토콜들을 포함하는 많은 요소를 갖고 있다. 전자메일에 대한 주요 애플리케이션 계층 프로토콜은 SMTP이다.
